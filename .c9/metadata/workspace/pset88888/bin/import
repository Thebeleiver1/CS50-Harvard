{"filter":false,"title":"import","tooltip":"/pset88888/bin/import","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":4,"column":4},"end":{"row":40,"column":18},"action":"remove","lines":[" require(__DIR__ . \"/../../includes/functions.php\");","    if ($argc != 2)","    {","        print(\"Usage: ./import [path-to-file]\\n\");","        return 1;","    };","    ","    $fileName = $argv[1];","  ","    if (!file_exists($fileName))","    {","        print(\"Sorry! File {$fileName} doesn't exist\\n\");","        return 2;  ","    }","    ","    if (!is_readable($fileName))","    {","        print(\"Sorry! File {$fileName} is not readable\\n\");","        return 3;  ","    }","    ","    // open file","    $file = fopen($fileName, \"r\");","    if (!$file)","    {","        print(\"Sorry! Unable to open file {$filename}\\n\");","        return 4;  ","    }","    // reading file and importing into database","    while (($line = fgetcsv($file, 0, \"\\t\")) !== false) ","\t{","\t    \t$result = query(\"INSERT INTO places (country_code, \t\t\tpostal_code, place_name, admin_name1, admin_code1, \t\t\tadmin_name2, admin_code2, admin_name3, admin_code3, \t\t\tlatitude, longitude, accuracy) VALUES","\t    \t(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", $line[0], $line[1], ","\t    \t$line[2], $line[3], $line[4], $line[5], $line[6], $line[7], ","\t    \t$line[8], $line[9], $line[10], $line[11]);","    \t}","    fclose($file);"],"id":6},{"start":{"row":4,"column":4},"end":{"row":34,"column":5},"action":"insert","lines":[" require(\"../includes/config.php\"); ","    // Get command line path argument","    if (!empty($argv[1]))","    {","        // Assign path to command line argument","        $path = $argv[1];","    }","    else","    {   ","        // Use default path if no command line argument","        $path = \"US.txt\";","    }","    // Check that file exists","    if (is_readable($path))","    {","        // Open the file","        $file = fopen($path, 'r');","        // Iterate over each line","        while(($place = fgetcsv($file, 1000, \"\\t\")) !== FALSE)","        {","            // SQL query that inserts place into the database, with an ordered set of attributes","            query(\"INSERT INTO places (country_code, postal_code, place_name, admin_name1, admin_code1, admin_name2, admin_code2, admin_name3, admin_code3, latitude, longitude, accuracy) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\", $place[0], $place[1], $place[2], $place[3], $place[4], $place[5], $place[6], $place[7], $place[8], $place[9], $place[10], $place[11]);","        }","        echo(\"The import is complete.\\n\");","        // Close the file","        fclose($file);","    }","    else","    {","        echo(\"That file does not exist or is not readable. Try ./import without arguments.\\n\");","    }"]}],[{"start":{"row":25,"column":12},"end":{"row":25,"column":13},"action":"insert","lines":["c"],"id":7}],[{"start":{"row":25,"column":13},"end":{"row":25,"column":14},"action":"insert","lines":["s"],"id":8}],[{"start":{"row":25,"column":14},"end":{"row":25,"column":15},"action":"insert","lines":["5"],"id":9}],[{"start":{"row":25,"column":15},"end":{"row":25,"column":16},"action":"insert","lines":["0"],"id":10}],[{"start":{"row":25,"column":16},"end":{"row":25,"column":17},"action":"insert","lines":[":"],"id":11}],[{"start":{"row":25,"column":17},"end":{"row":25,"column":18},"action":"insert","lines":[":"],"id":12}],[{"start":{"row":25,"column":17},"end":{"row":25,"column":18},"action":"remove","lines":[":"],"id":13}],[{"start":{"row":25,"column":17},"end":{"row":25,"column":18},"action":"insert","lines":[":"],"id":14}]]},"ace":{"folds":[],"scrolltop":141,"scrollleft":0,"selection":{"start":{"row":25,"column":18},"end":{"row":25,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":9,"state":"start","mode":"ace/mode/text"}},"timestamp":1465773166144,"hash":"510e1450a17272a5be64e30395525a80534e6daa"}